language: java
dist: trusty

before_install:
  - rm -rf $HOME/.m2/repository/io/vlingo
  - cp .travis/settings.xml $HOME/.m2/settings.xml
  # Force caching of maven plugins used during deploy phase
  - mvn deploy:help versions:help help:help

script:
  - mvn install

before_cache:
  - rm -rf $HOME/.m2/repository/io/vlingo
cache:
  directories:
    - $HOME/.m2/repository

deploy:
  - provider: script
    script: "mvn deploy -DskipTests"
    skip_cleanup: true
    on:
      tags: true
  - provider: script
    script: "mvn deploy -DskipTests"
    skip_cleanup: true
    on:
      branch: master

notifications:
  slack:
    secure: EYpYAnEDh3c33w9VS5O0Ecqvi0eA0/3Vn3DXEDFZyM8VrqI3T4lz3eMGB3Lkf9Sz/BsDnF/oMHvUw70YEeOSR7sRewoTf/MG47xHc8G0R3ulJNSCbjDIeClyWArJGIE7+BUVLUhlj0qu5ifiaBJ5bjC++52h+EiXJJFWuC0933exuF8bW1rMSvDMscPbftEZ61cmLvNQr6eWGG3wVj7WpuIDhlMdONVyr4APxWxEtJSJNS2bAptNc038aRIjoDy8IOYON8gi9o0jy07H5jalMNL2EHoqo5RERfXB15ja6h7mM368V9Ez72AS7kkJeEW+2zNCUrJP8dCOw25c1ISgODlirE7sFQAxA17CBLgblLG84eJFP30kT+wvCmrcZZfTbAkqFnp/PXYw1rmXSxtzKf9twTRbAnFBqLHTteS9BBIFnNrvaZX6H0kjVqlqeXnbCwovDMnGZpd5sd/F40PeMlBDPQDc0fRsPp/9tBwd+KcMDM36XFokjc5/VMCyxNb0KWybMQbehBCY/cAY7kRPsRaQr6ztFA6pj2AsC42+2inIPePcqg4HaTf4oTtU22ibqiWi2g6qeUpMAocYaqzQs4ds4L1lijnFHsOoVjN6uAqzejMWfTynct3LE1kim6P9GHBK2RcThP5rA5rzgBTGmIBEZo/GY/Orv5uXrLWU0w4=
